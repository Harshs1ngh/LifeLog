
/* ---------- THEME VARIABLES ---------- */
:root{
  --bg: #f6f8fb;
  --card: rgba(255,255,255,0.8);
  --muted: #6b7280;
  --accent-a: #6366F1;
  --accent-b: #4F46E5;
  --glass-border: rgba(15,23,42,0.04);
  --shadow: 0 6px 20px rgba(16,24,40,0.06);
}

/* DARK MODE VARIABLES */
/* --------------------
   PROFESSIONAL DARK MODE
   -------------------- */
.app.dark {
  /* MAIN COLORS */
  --bg: #0d1117; /* deep neutral black-blue */
  --card: #161b22; /* Github-style card */
  --muted: #8b98a5;
  --accent-a: #7b6cff; /* premium gradient accent */
  --accent-b: #6a5cf8;

  /* GLASS + BORDER */
  --glass-border: rgba(255,255,255,0.08);
  --shadow: 0 8px 30px rgba(0,0,0,0.45);

  /* TEXT COLOR OVERRIDE */
  color: #e6e9f0;
}

/* Make all cards feel premium */
.app.dark .card,
.app.dark .entry-card,
.app.dark .entry-card-compact,
.app.dark .lc-card,
.app.dark .write-card {
  background: #161b22 !important;
  border: 1px solid rgba(255,255,255,0.07);
  box-shadow: 0 4px 18px rgba(0,0,0,0.35);
}

/* Textarea in dark mode */
.app.dark textarea,
.app.dark .j-textarea {
  background: #0f1318;
  color: #e6e9f0;
  border-color: rgba(255,255,255,0.08);
}

/* Input fields */
.app.dark input {
  background: #0f1318;
  border: 1px solid rgba(255,255,255,0.08);
  color: #e6e9f0;
}

/* Buttons more premium */
.app.dark .save-entry-btn,
.app.dark .btn-primary,
.app.dark .nav-link.active {
  background: linear-gradient(90deg, #7b6cff, #6a5cf8) !important;
  color: white !important;
  box-shadow: 0 8px 20px rgba(107,94,255,0.24);
}

/* Ghost buttons */
.app.dark .btn-ghost {
  border-color: rgba(255,255,255,0.12);
  color: #c5cbd3;
}

/* Mood pill */
.app.dark .mood-pill,
.app.dark .mood-small {
  background: rgba(123,108,255,0.15);
  border: 1px solid rgba(123,108,255,0.25);
  color: #cfd3ff;
}

/* Entry card text */
.app.dark .entry-text {
  color: #cbd2da;
}

/* Heatmap muted cell */
.app.dark .muted-cell {
  background: #21262d;
  color: #8b98a5;
}

/* MOVE BACKGROUND TO APP SO DARK MODE CAN OVERRIDE */
.app {
  background: var(--bg);
  min-height: 100vh;
  color: #0f172a;
  transition: background .25s ease, color .25s ease;
}

/* DARK MODE TOPBAR OVERRIDE */
.app.dark .topbar {
  background: rgba(22,27,34,0.6); /* smooth glass */
  border: 1px solid rgba(255,255,255,0.06);
  backdrop-filter: blur(10px);
  box-shadow: 0 12px 34px rgba(0,0,0,0.45);
  color: #f0f3f7;
}
/* EVERYTHING BELOW IS YOUR ORIGINAL CODE — UNCHANGED */

*{ box-sizing:border-box; }
body,html,#root{ height:100%; margin:0; }
body{ font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto; }

/* Top rounded header (Reflection-style) */
.topbar{
  width: calc(100% - 80px);
  margin:24px 40px;
  border-radius:48px;
  padding:12px 20px;
  background: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,255,255,0.8));
  box-shadow: 0 10px 30px rgba(16,24,40,0.06);
  border:1px solid rgba(15,23,42,0.04);
}
.topbar.dark{ background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02)); }
.topbar-inner{ display:flex; align-items:center; gap:20px; justify-content:space-between; }
.brand{ font-weight:800; font-size:24px; color:var(--accent-a); letter-spacing:0.5px; }

.top-nav{ display:flex; gap:18px; align-items:center; }
.nav-link{ background:transparent; border:none; padding:8px 12px; border-radius:12px; font-weight:600; cursor:pointer; color:inherit; }
.nav-link.active{ background:linear-gradient(90deg,var(--accent-a),var(--accent-b)); color:white; box-shadow:0 8px 22px rgba(79,70,229,0.12); }

.top-actions{ display:flex; gap:12px; align-items:center; }
.top-actions .link{ background:transparent; border:none; color:var(--muted); cursor:pointer; }
.cta{ background:linear-gradient(90deg,var(--accent-a),var(--accent-b)); color:white; padding:8px 14px; border-radius:999px; border:none; font-weight:700; }
.theme{ background:transparent; border:1px solid rgba(15,23,42,0.05); padding:6px 10px; border-radius:8px; cursor:pointer; }

/* Main shell */
.main-shell{ padding:28px 40px; }
.container{ max-width:1100px; margin:20px auto; }

/* Cards */
.card{ background:var(--card); padding:16px; border-radius:12px; box-shadow:0 6px 20px rgba(16,24,40,0.06); border:1px solid rgba(15,23,42,0.03); margin-bottom:16px; }
.small{ padding:12px; }
.summary-row{ display:grid; grid-template-columns:repeat(3,1fr); gap:12px; margin-bottom:14px; }
.big{ font-size:18px; font-weight:800; }

.journal-page textarea{ width:100%; min-height:120px; border-radius:10px; padding:12px; border:1px solid rgba(15,23,42,0.06); resize:vertical; }
.actions{ display:flex; justify-content:flex-end; margin-top:10px; }
.save-btn{ background:linear-gradient(90deg,var(--accent-a),var(--accent-b)); color:white; padding:10px 14px; border-radius:10px; border:none; cursor:pointer; font-weight:700; }

.entries{ display:grid; gap:12px; }
.entry-card{ padding:12px; border-radius:10px; background:linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,255,255,0.85)); display:block; }
.entry-card header{ display:flex; justify-content:space-between; align-items:center; margin-bottom:6px; }
.entry-text{ line-height:1.5; }
.delete-btn{ background:transparent; border:none; color:var(--muted); cursor:pointer; }

/* Tasks */
.task-input{ display:flex; gap:10px; align-items:center; margin-bottom:12px; }
.task-input input{ flex:1; padding:10px; border-radius:8px; border:1px solid rgba(15,23,42,0.06); }
.pill{ padding:6px 8px; border-radius:999px; border:1px solid rgba(15,23,42,0.04); cursor:pointer; }
.pill.active{ background:linear-gradient(90deg,var(--accent-a),var(--accent-b)); color:white; }
.btn-add{ background:var(--accent-a); color:white; padding:8px 10px; border-radius:8px; border:none; }
.task-list{ list-style:none; padding:0; margin:0; }
.task-row{ display:flex; justify-content:space-between; align-items:center; padding:10px; border-radius:8px; border:1px solid rgba(15,23,42,0.04); margin-bottom:8px; }

/* Insights heatmap */
.heatmap-grid.small{ display:flex; flex-wrap:wrap; width:680px; gap:4px; padding:8px; }
.heatmap-cell{ width:12px; height:12px; border-radius:3px; }
.level-0{ background:#979797; }
.level-1{ background:#c0fad5; }
.level-2{ background:#86efac; }
.level-3{ background:#4ade80; }
.level-4{ background:#16a34a; }
.future{ background: rgba(15,23,42,0.06); opacity:0.6; }

/* Responsive */
@media (max-width:920px){
  .topbar{ width:calc(100% - 32px); margin:16px; }
  .summary-row{ grid-template-columns:1fr; }
  .container{ padding:0 12px; }
  .heatmap-grid.small{ width:100%; }
}

/* ======================
   Offline Smart Journal
   ====================== */

.offline-smart-journal { position: relative; z-index: 1; display:flex; flex-direction:column; gap:16px; }

/* subtle animated backgrounds */
.bg-animations {
  position:absolute;
  inset:0;
  z-index:0;
  pointer-events:none;
  background:
    radial-gradient(700px 400px at 8% 10%, rgba(79,70,229,0.06), transparent),
    radial-gradient(400px 200px at 88% 78%, rgba(34,197,94,0.03), transparent);
  mix-blend-mode: screen;
  opacity: 0.95;
  transition: opacity .4s ease;
}

/* top row */
.journal-top { display:flex; justify-content:space-between; align-items:center; gap:12px; position:relative; z-index:2; }
.top-actions { display:flex; gap:8px; }

/* cards and stats */
.journal-summary { display:grid; grid-template-columns: repeat(3, 1fr); gap:12px; }
.card.stat { padding:12px; border-radius:12px; background:var(--card); border:1px solid var(--glass-border); box-shadow:var(--shadow); }
.card.stat h4 { margin:0 0 8px 0; font-size:14px; color:var(--muted); }
.card.stat .big, .card.stat .mood { font-weight:800; font-size:18px; display:flex; align-items:center; gap:8px; }

/* write area */
.write-card { padding:14px; border-radius:12px; background:var(--card); border:1px solid var(--glass-border); box-shadow:var(--shadow); }
.j-textarea { width:100%; min-height:120px; border-radius:10px; padding:12px; border:1px solid rgba(15,23,42,0.06); background:transparent; resize:vertical; font-size:15px; }
.write-actions { display:flex; justify-content:space-between; align-items:center; margin-top:8px; }

/* entry list */
.entries-list { display:flex; flex-direction:column; gap:10px; z-index:2; }
.entry-card-compact { padding:12px; border-radius:12px; background:var(--card); border:1px solid var(--glass-border); box-shadow:var(--shadow); }
.entry-top { display:flex; justify-content:space-between; align-items:center; margin-bottom:8px; }
.entry-date { color:var(--muted); font-size:13px; }
.entry-text { margin:0 0 10px 0; line-height:1.5; }

/* buttons */
.btn-ghost { background: transparent; border:1px solid rgba(15,23,42,0.06); padding:8px 10px; border-radius:8px; cursor:pointer; }
.btn-primary { background: linear-gradient(90deg,#6366F1,#4F46E5); color:white; border:none; padding:10px 12px; border-radius:10px; cursor:pointer; }
.btn-danger { background:transparent; border:none; color:#ef4444; cursor:pointer; }
.save-entry-btn { background: linear-gradient(90deg,#6366F1,#4F46E5); color:white; padding:8px 12px; border-radius:8px; border:none; cursor:pointer; }

/* modal / overlay */
.overlay { position:fixed; inset:0; background: rgba(0,0,0,0.45); display:flex; justify-content:center; align-items:start; padding:40px 12px; z-index:40; }
.summary-card { width:min(920px,96%); max-height:86vh; overflow:auto; background:var(--card); padding:18px; border-radius:12px; border:1px solid var(--glass-border); box-shadow:0 30px 60px rgba(2,6,23,0.45); }
.combined-text-preview { background: rgba(0,0,0,0.03); padding:10px; border-radius:8px; font-family: ui-monospace, SFMono-Regular, Menlo, monospace; margin-bottom:10px; }
.ai-generated h4 { margin:12px 0 6px 0; }
.confirm-cta { margin-top:12px; padding-top:12px; border-top:1px dashed rgba(15,23,42,0.04); }

.more-text { width:100%; min-height:80px; padding:8px; border-radius:8px; border:1px solid rgba(15,23,42,0.06); }

.empty-state { padding:12px; border-radius:10px; background:var(--card); border:1px solid var(--glass-border); }
.muted { color:var(--muted); }
.small { font-size:13px; }

@media (max-width: 920px) {
  .journal-summary { grid-template-columns: repeat(1,1fr); }
  .summary-card { width:94%; padding:12px; }
}

/* =========================
   Tasks — Modern Dashboard
   ========================= */

.tasks-modern-grid {
  display: grid;
  grid-template-columns: 1fr 360px;
  gap: 18px;
  align-items: start;
}

@media (max-width: 980px) {
  .tasks-modern-grid {
    grid-template-columns: 1fr;
  }
}

.tasks-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.tasks-title { font-size: 20px; margin: 0; font-weight: 800; }

.progress-circle { position: relative; width: 90px; height: 90px; }
.progress-circle svg { transform: rotate(-90deg); display:block; }
.progress-circle .bg { fill: none; stroke: rgba(15,23,42,0.06); stroke-width: 8; }
.progress-circle .fg { fill: none; stroke-width: 8; stroke-linecap: round; transition: stroke-dashoffset 0.5s cubic-bezier(.2,.8,.2,1), stroke 0.5s; }
.progress-text { position: absolute; top: 28px; left: 0; width: 90px; text-align: center; font-weight: 800; }

.add-task-card { padding: 18px; }
.task-input-modern { display: flex; flex-direction: column; gap: 12px; }
.task-input-modern input { padding: 12px; font-size: 15px; border-radius: 10px; border: 1px solid rgba(15,23,42,0.06); }
.category-select { display: flex; gap: 8px; flex-wrap: wrap; }
.cat-pill { padding: 6px 12px; border-radius: 999px; border: 1px solid rgba(15,23,42,0.06); background: transparent; cursor: pointer; font-weight: 700; }
.cat-pill.active { background: linear-gradient(90deg,#6366f1,#4f46e5); color: white; box-shadow: 0 8px 24px rgba(79,70,229,0.14); }

.add-row { display:flex; align-items:center; gap:12px; justify-content:space-between; }
.btn-add-modern { background: linear-gradient(90deg,#6366f1,#4f46e5); color:white; padding: 10px 14px; border-radius: 10px; border:none; cursor:pointer; font-weight:800; transition: transform .15s ease; }
.btn-add-modern:hover { transform: translateY(-3px); }

.task-list-modern { margin-top: 12px; display:flex; flex-direction:column; gap:12px; }
.task-item-modern { display:flex; align-items:center; justify-content:space-between; padding:12px; border-radius:12px; background: var(--card); border:1px solid var(--glass-border); transition: transform .12s ease, box-shadow .12s ease; }
.task-item-modern:hover { transform: translateY(-6px); box-shadow: 0 16px 34px rgba(12,18,39,0.06); }
.task-item-modern.done { opacity:0.7; text-decoration: line-through; }

.task-left-modern { display:flex; gap:12px; align-items:center; }
.task-left-modern input[type="checkbox"] { width:18px; height:18px; accent-color: #6366f1; }
.task-meta-modern { display:flex; flex-direction:column; }
.task-title-modern { font-weight:700; font-size:15px; }
.task-cat { font-size:12px; color:var(--muted); }

.task-delete-modern { background:transparent; border:none; cursor:pointer; font-size:18px; }
.task-delete-modern:hover { color: #ef4444; }

.tasks-footer-modern { display:flex; justify-content:space-between; align-items:center; margin-top:8px; }
.clear-btn-modern { background:transparent; border:1px dashed rgba(15,23,42,0.06); padding:8px 12px; border-radius:10px; cursor:pointer; }

.tasks-right-col { display:flex; flex-direction:column; gap:12px; position: sticky; top: 28px; }
.quick-actions-card { padding: 14px; }
.quick-actions-card h4 { margin-top:0; }
.quick-actions-card .ghost { width:100%; display:block; margin-bottom:8px; padding:8px; border-radius:8px; border:1px dashed rgba(15,23,42,0.06); background:transparent; cursor:pointer; }

.weekly-chart { padding: 14px; border-radius:12px; background: var(--card); box-shadow: var(--shadow); }
.weekly-chart h4 { margin:0 0 8px 0; }

.empty-state { padding: 20px; text-align:center; border-radius:12px; }

.micro-stats { color:var(--muted); font-size:13px; }

@media (max-width: 640px) {
  .progress-circle { display:none; }
  .add-row { flex-direction: column; align-items: stretch; gap: 8px; }
}

/* ===========================
   Insights — Modern Analytics
   =========================== */

.modern-insights { display: flex; flex-direction: column; gap: 18px; animation: fadeIn .35s ease; }

.insights-top { display:flex; justify-content:space-between; align-items:center; gap:12px; }
.insights-left h2 { margin:0; font-size:22px; }
.insights-right { display:flex; gap:12px; align-items:center; }

.search-box input {
  padding:10px 12px;
  border-radius:10px;
  border:1px solid rgba(15,23,42,0.06);
  width:360px;
}

.insights-stats { display:flex; gap:12px; }
.stat-large { flex:1; padding:14px; }
.stat-mini { width:260px; padding:14px; }

.streak-row { display:flex; gap:12px; align-items:center; }
.streak-counter { display:flex; flex-direction:column; align-items:center; gap:6px; }
.streak-number { font-weight:800; font-size:28px; color:#111827; }
.streak-label { font-size:13px; color:var(--muted); }

.weekly-sparklines { display:flex; gap:8px; align-items:end; padding-left:12px; }
.spark-bar { display:flex; flex-direction:column; align-items:center; gap:6px; width:22px; }
.spark { width:100%; border-radius:6px 6px 0 0; height:28px; transition: all .18s ease; }
.spark-bar small { font-size:11px; color:var(--muted); }

.insights-main { display:flex; gap:18px; }
.left-column { flex:1; display:flex; flex-direction:column; gap:12px; }
.right-column { width:360px; display:flex; flex-direction:column; gap:12px; }

.chart-card { padding:14px; }
.heatmap-card { padding:14px; }

.modern-heatmap { display:grid; grid-template-columns: repeat(7, 1fr); gap:6px; padding:8px; }
.heat-cell { min-height:46px; display:flex; align-items:flex-start; justify-content:flex-start; border-radius:8px; padding:6px; cursor:pointer; transition: transform .12s ease, box-shadow .12s ease; color:white; }
.heat-cell .cell-day { font-size:12px; font-weight:700; opacity:.95; text-shadow: 0 1px 0 rgba(0,0,0,0.08); }
.heat-cell:hover { transform: translateY(-6px); box-shadow: 0 14px 28px rgba(15,23,42,0.08); }
.muted-cell { opacity:0.35; background:#f3f4f6; color:#374151; }

.daily-drill .entries-list { display:flex; flex-direction:column; gap:10px; margin-top:8px; }
.entry-row { display:flex; gap:12px; align-items:flex-start; }
.entry-time { min-width:70px; color:var(--muted); font-size:13px; }
.entry-mood-pill { padding:6px 10px; border-radius:999px; color:white; font-weight:700; margin-bottom:6px; display:inline-block; }
.entry-text-preview { font-size:14px; }

.pie-card { padding:12px; }
.legend-small { display:flex; gap:8px; align-items:center; margin-top:8px; flex-wrap:wrap; }
.legend-item { display:flex; gap:8px; align-items:center; }
.legend-color { width:12px; height:12px; border-radius:3px; display:inline-block; }

.legend-card { padding:12px; }
.legend-grid { display:flex; flex-direction:column; gap:8px; }
.legend-row { display:flex; gap:10px; align-items:center; }

.chip { padding:6px 10px; border-radius:999px; border:1px solid rgba(15,23,42,0.04); background:transparent; cursor:pointer; margin-left:8px; }
.chip.active { background: linear-gradient(90deg,#6366f1,#4f46e5); color:white; box-shadow:0 8px 24px rgba(79,70,229,0.12); }

.search-results { padding:12px; max-height: 360px; overflow:auto; }
.search-group-date { font-weight:700; margin-top:8px; }
.search-item { padding:8px 0; border-bottom:1px dashed rgba(15,23,42,0.03); }
.search-text mark { background: #fff59d; color: #111827; padding:0 2px; border-radius:3px; }

.muted.small { font-size:13px; color:var(--muted); }
.entry-row .entry-meta { margin-top:6px; color:var(--muted); }

@media (max-width: 1100px) {
  .insights-main { flex-direction:column; }
  .right-column { width:100%; }
  .search-box input { width:260px; }
}

/* ===========================
   LIFECARD
   =========================== */

.lifecard-section {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.lc-title {
  font-size: 26px;
  font-weight: 800;
}

.lc-sub {
  font-size: 14px;
  color: var(--muted);
}

.lc-filter {
  display: flex;
  gap: 10px;
}
.lc-filter select {
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px solid rgba(0,0,0,0.1);
  background: var(--card);
  font-weight: 600;
  cursor: pointer;
}

.week-header h3 {
  margin: 0;
  margin-top: 8px;
}
.week-header .muted {
  margin-top: 4px;
}

.lc-entries {
  display: flex;
  flex-direction: column;
  gap: 14px;
}
.lc-card {
  background: var(--card);
  border-radius: 16px;
  padding: 18px;
  box-shadow: var(--shadow);
  border: 1px solid var(--glass-border);
}

.lc-card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.lc-card-header h4 { margin: 0; }

.mood-small {
  padding: 6px 10px;
  background: rgba(99,102,241,0.1);
  border-radius: 10px;
  font-size: 12px;
  font-weight: 600;
}

.lc-text {
  margin-top: 10px;
  line-height: 1.6;
}

.lc-image {
  width: 100%;
  height: auto;
  border-radius: 12px;
  margin-top: 10px;
}

.lc-audio {
  width: 100%;
  margin-top: 12px;
}

.no-data {
  margin-top: 10px;
  font-size: 14px;
}

/* Professional file button */
.file-btn {
  display:inline-block;
  background:linear-gradient(180deg,#fff,#f7f8fb);
  border:1px solid rgba(15,23,42,0.06);
  padding:8px 12px;
  border-radius:10px;
  cursor:pointer;
  font-weight:600;
}
.file-btn .file-btn-inner { display:flex; align-items:center; gap:6px; color:#0f172a; font-size:14px; }

.image-previews img { border-radius:8px; object-fit:cover; }

.btn-ghost, .file-btn, .save-entry-btn {
  transition: all 140ms ease;
}
.file-btn:hover, .btn-ghost:hover, .save-entry-btn:hover { transform:translateY(-3px); box-shadow:0 8px 24px rgba(16,24,40,0.06); }

.audio-preview audio { width:260px; }

.error-banner { background:#fee2e2; color:#9f1239; padding:10px; border-radius:8px; margin-top:10px; }

/* ------------------------------
   Summary modal (Glassmorphism - Style A)
   ------------------------------ */

.overlay {
  position: fixed;
  inset: 0;
  background: rgba(6,10,20,0.45);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1200;
  padding: 24px;
  animation: fadeIn .16s ease;
}

@keyframes fadeIn {
  from { opacity: 0; transform: scale(0.98); }
  to { opacity: 1; transform: scale(1); }
}

.summary-card.glass {
  width: min(920px, 96%);
  max-height: 92vh;
  overflow: auto;
  background: linear-gradient(180deg, rgba(84, 155, 255, 0.72), rgba(255,255,255,0.58));
  border-radius: 16px;
  padding: 20px;
  position: relative;
  box-shadow: 0 20px 60px rgba(2,6,23,0.28), 0 4px 12px rgba(2,6,23,0.08);
  border: 1px solid rgba(255,255,255,0.6);
  backdrop-filter: blur(8px) saturate(120%);
}

.app.dark .summary-card.glass {
  background: linear-gradient(180deg, rgba(2,6,23,0.65), rgba(2,6,23,0.5));
  border: 1px solid rgba(255,255,255,0.04);
}

.summary-top {
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:18px;
  margin-bottom:12px;
}

.summary-badge {
  display:flex;
  gap:16px;
  align-items:center;
}

.score-circle { width:88px; height:88px; }
.circular-chart { display:block; width:100%; height:100%; transform: rotate(-90deg); }
.circle-bg { fill: none; stroke: rgba(15,23,42,0.06); stroke-width: 3.5; }
.circle { fill: none; stroke: linear-gradient(90deg,#6366F1,#4F46E5); stroke-width: 3.5; stroke-linecap: round; transition: stroke-dasharray .5s ease; }
.chart-number { fill: #0f172a; font-size:6px; text-anchor:middle; transform: rotate(90deg); font-weight:800; }

.badge-text .label-large { font-size:18px; font-weight:800; margin-bottom:6px; }
.badge-text .muted { font-size:12px; color:var(--muted); }

.summary-actions { display:flex; gap:10px; align-items:center; }
.summary-actions .btn-primary { padding:10px 14px; border-radius:10px; font-weight:700; box-shadow:0 8px 28px rgba(79,70,229,0.12); }
.summary-actions .btn-ghost { padding:8px 12px; border-radius:8px; }

.summary-body { margin-top:8px; border-top:1px dashed rgba(15,23,42,0.04); padding-top:12px; }
.summary-body h4 { margin:10px 0 6px 0; }
.summary-text { line-height:1.6; margin-bottom:8px; }
.advice-text { font-weight:600; color: #0f172a; margin-bottom:8px; }

.events-list { list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:6px; }
.events-list li.pos { color: #155724; background: rgba(34,197,94,0.06); padding:6px 10px; border-radius:8px; }
.events-list li.neg { color: #7f1d1d; background: rgba(239,68,68,0.06); padding:6px 10px; border-radius:8px; }
.events-list li.neu { color: var(--muted); padding:6px 10px; border-radius:8px; }

.modal-close { position:absolute; right:12px; top:12px; background:transparent; border:none; font-size:18px; cursor:pointer; }

.mood-pill { display:flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; background: linear-gradient(90deg,#fff,#f7f8fb); border:1px solid rgba(15,23,42,0.04); font-weight:700; }
.app.dark .mood-pill { background: linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.04); }

.summary-card .circle { stroke: url(#g1); stroke: #6366F1; }

.summary-card .muted.small { color:var(--muted); font-size:12px; }
.summary-card .label-large { color: #0f172a; }
.app.dark .summary-card .label-large { color: #e6eef7; }

@media (max-width:720px){
  .summary-top { flex-direction: column; align-items:stretch; }
  .summary-actions { justify-content:flex-end; }
  .score-circle { width:72px; height:72px; }
}

/* ---------- MOBILE HEADER FIX ---------- */

.mobile-menu-btn {
  display: none;
  background: transparent;
  font-size: 24px;
  border: none;
  cursor: pointer;
  padding: 6px 10px;
  color: inherit;
}

.mobile-menu {
  display: none;
}

@media (max-width: 820px) {
  
  /* Hide desktop navigation */
  .desktop-nav,
  .desktop-actions {
    display: none !important;
  }

  .mobile-menu-btn {
    display: block;
  }

  .topbar-inner {
    justify-content: space-between;
  }

  .mobile-menu {
    display: flex;
    flex-direction: column;
    padding: 16px;
    gap: 10px;
    background: var(--card);
    border-radius: 12px;
    margin: 10px 16px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.25);
    animation: fadeIn 0.2s ease;
  }

  .m-link {
    background: transparent;
    border: none;
    text-align: left;
    padding: 10px 4px;
    font-size: 16px;
    cursor: pointer;
    font-weight: 600;
    color: inherit;
  }

  .cta-mobile {
    background: linear-gradient(90deg, var(--accent-a), var(--accent-b));
    color: white;
    padding: 10px 12px;
    border-radius: 10px;
    margin-top: 4px;
  }

  .divider {
    border-top: 1px solid rgba(255,255,255,0.1);
    margin: 8px 0;
  }
}


/* Dark mode should control the entire document, not just .app */
html.dark, html.dark body {
  background: #0d1117 !important;
}

/* Ensure no light background flashes */
html, body {
  background: var(--bg) !important;
}
